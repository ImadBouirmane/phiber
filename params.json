{"name":"Phiber","tagline":"PHP Phiber framework - Build light-weight lightning-fast PhP applications with Phiber","body":"[![Scrutinizer Quality Score](https://scrutinizer-ci.com/g/ghousseyn/phiber/badges/quality-score.png?s=436bbca471c3881b34e0c2d36b311c003aea5739)](https://scrutinizer-ci.com/g/ghousseyn/phiber/) [![Build Status](https://travis-ci.org/ghousseyn/phiber.png?branch=alpha)](https://travis-ci.org/ghousseyn/phiber) [![Code Coverage](https://scrutinizer-ci.com/g/ghousseyn/phiber/badges/coverage.png?s=6282beaf967e0ac820a325b6897fab427f286908)](https://scrutinizer-ci.com/g/ghousseyn/phiber/)\r\n\r\n\r\n[![Phiber Framework](site/logo.png)]\r\n\r\nPhiber\r\n=====\r\n\r\n\r\nPhiber is a lightweight MVC PhP framework featuring:\r\n\r\n- A comprehensive router with zero configuration required\r\n\r\n```\r\n# for this url for exmaple\r\n\r\n  http://yoursite.com/dev/index/action/var1/val1?var2=val2/?var3/val3\r\n\r\n# the router will pass your application an array (for GET and POST and Ajax calls alike)\r\n\r\nArray\r\n(\r\n    [module] => dev\r\n    [controller] => index\r\n    [action] => action\r\n    [vars] => Array\r\n        (\r\n            [var1] => val1\r\n            [var2] => val2\r\n            [var3] => val3\r\n        )\r\n\r\n)\r\n\r\n```\r\n\r\n``` php\r\n  //to get var1 for instance in your controller being it POST or GET (AJAX calls also)\r\n\r\n  $var1 = $this->_request('var1');\r\n  \r\n  //Check request type\r\n  \r\n  if($this->isPost()){\r\n  \r\n  }\r\n  \r\n  /* \r\n   * For ajax requests you can disable the layout if there is any \r\n   * along with action template unless the 'html' context is specified\r\n   * in which case only the action template is returned\r\n   */\r\n  if($this->isAjax()){\r\n  \t$this->disableLayout();\r\n  }\r\n  \r\n```\r\n\r\n- Easily extensible with modules/plugins (automatically loaded and extremely easy to create) \r\n\r\n``` php\r\n  /* \r\n  * For modules just create a folder under modules directory and toss your\r\n  * controllers there all class files in the format {classname}.php will be\r\n  * accessible as controllers \r\n  * you don't need the word controller in the class name and your actions\r\n  * doesn't need the word action neither\r\n  */\r\n   \r\n   //file: /modules/firstmod/cool.php\r\n   \r\n  class cool extends Phiber\\controller {\r\n\r\n    function index(){\r\n      $this->view->message = \"message\";\r\n    }\r\n    function action(){\r\n      $this->view->title = \"Cool title from action\";\r\n    }\r\n  }\r\n  // if this is in a directory called firstmod \r\n  // http://localhost/firstmod/cool executes the index method (default method configurable)\r\n  // http://localhost/firstmod/cool/action will fire the action method\r\n  // and so on\r\n  \r\n```\r\n\r\n``` php\r\n\r\n  /*\r\n  *  The template should be in a subdirectory under views called 'cool' with\r\n  *  template files in it mapping the actions\r\n  *  so for our controller we need an 'index.php' and an 'action.php'\r\n  */\r\n\r\n  /*\r\n  * file: /modules/firstmod/views/cool/index.php\r\n  */\r\n  \r\n  <div class=\"cool-msg-style\">\r\n    <?php echo $this->message ?>\r\n  </div>\r\n```\r\n\r\n``` php\r\n  /*\r\n  * file: /modules/firstmod/views/cool/action.php\r\n  */\r\n  <div class=\"cool-title-style\">\r\n    <?php echo $this->title ?>\r\n  </div>\r\n```\r\n\r\n``` php\r\n  // Plugins\r\n  \r\n  /*\r\n  * For plugins just create a folder named after your plugin and place it in the \r\n  * plugins folder\r\n  * follwing the same conventions your plugin loader would be expected to be in\r\n  * the format: {pluginName}.php\r\n  * The class should also extend Phiber\\plugin \r\n  * The run() method is the entry point and should contain code to \r\n  * initialize/execute your plugin\r\n  */\r\n  \r\n  //file: /plugins/coolplugin/coolplugin.php\r\n  \r\n  class coolplugin extends Phiber\\plugin {\r\n\r\n    function run(){\r\n      \r\n      /* Your usefull code here */\r\n      \r\n    }\r\n  }\r\n  \r\n```\r\n- ZF like templating\r\n\r\n``` php\r\n  /**\r\n  * from your controller\r\n  * /\r\n\r\n  $this->view->variable = \"some text\";\r\n  \r\n  //in the template \r\n  \r\n  $this->variable;\r\n```\r\n\r\n- Ajax context aware (html, plain-text or json)\r\n\r\n``` php\r\n  //check for ajax calls\r\n\r\n  if($this->isAjax()){\r\n    \r\n    //send what you want through ajax\r\n    \r\n    echo \"text here\";\r\n    \r\n    //or json\r\n    \r\n    $this->sendJSON(array('success'=>true));\r\n    \r\n    /*\r\n    \r\n    {\"success\":true}\r\n    \r\n    */\r\n    \r\n    }\r\n    \r\n  //alternatively you could just leave your action as it is\r\n    \r\n  if($trueCondition){\r\n          \r\n        /* do some processing */\r\n  }\r\n    \r\n  $this->view->msg1 = \"result one\";\r\n  $this->view->someothervar = \"some cool findings\";\r\n    \r\n  //Then switch to the 'html' context to send the contents of the template file as it is (no layout)\r\n  \r\n  if($this->isAjax()){\r\n        $this->contextSwitch('html');\r\n  }\r\n\r\n```\r\n- An ORM and a query builder to handle database interactions with a relation-aware model class generator (currently supporting only MySQL)\r\n\r\n```php\r\n\r\n/**\r\n* for a table \"blog_post\" an entity file with the class blog_post will be\r\n* generated for you using the generate tool.\r\n* Edit the generate.php file and put in your db credentials\r\n* you can specify the path where the files should be saved using the $gen->path\r\n* property.\r\n* Then execute generate.php in cli and move the created files to the entity dir\r\n* if you specified a different path.\r\n* The tool will inspect your database and identify Primary keys (composite too)\r\n* foreign keys (relations) and the other columns\r\n* Each table will have its own entity class file\r\n* /\r\n\r\n// From your model (in models folder)\r\n// create file: /models/blog_post.php\r\n```\r\n```php\r\nnamespace models;\r\nuse Phiber;\r\nuse entity;\r\n\r\nclass blog_post extends Phiber\\model\r\n{\r\n   \r\n  // example model method\r\n   \r\n   public funciton getPost($id){\r\n      $post = entity\\blog_post::getInstance();\r\n      return $post->find($id)->fetch();\r\n   }\r\n   .... Any domain specific logic can be put here too\r\n}\r\n\r\n//within your model you can do more:  \r\n\r\n// create new\r\n\r\n   $post->title = \"Great tips\";\r\n   $post->link = \"http://www.somelink.com\";\r\n   $post->save();\r\n   \r\n// fetch existing\r\n// get post with primary key = 0 (regardless of the name of your primary key)\r\n\r\n   $result = $post->find(0)->fetch();  // Careful when using composite primary keys coz this will much only the first member\r\n\r\n// OR\r\n   \r\n   $result = $post->find(array('user_id' =>14))->limit(0,5)->fetch(); // fetchs 5 results\r\n   \r\n// OR\r\n\r\n   $result = $post->select()->where('user_id = ?',14)->limit(0,5)->fetch(); // same as previous\r\n      \r\n// $result is a collection\r\n\r\n   //show results\r\n   \r\n       \tforeach ($result as $r){\r\n          \r\n          \techo \"Title: $r->title \";\r\n\r\n        }\r\n         \r\n   //change results (only changed columns will be included in the query)\r\n   \r\n    \tforeach ($result as $r){\r\n    \r\n    \t\t$r->title = \"$r->title (great)\";\r\n    \t\t$r->save();\r\n    \t}\r\n    /*\r\n    *\tIf table \"blog_post\" has a constraint fk to other tables like \"user\" for example\r\n    *\tyou can either join on select using with() (eager loading)\r\n    */\r\n    \r\n    $result = $post->select()\r\n    \t\t\t   ->where('user_id = ?',14)\r\n    \t\t\t   ->with(array('user' => array(\"col1\",\"col2\"))) // not specifying any columns will select user.*\r\n    \t\t\t   ->limit(0,5)->fetch();\r\n    \t\t\t   \r\n    // $result is a collection instance (you can search within it, sort it and do a lot of things)\r\n    \r\n    $result->sortByProperty('rating'); // defaults to regular sort (other sorting options are available)\r\n     \r\n    /*\r\n    *\tor load it when needed (lazy loading) \r\n    *\tby calling a virtual method named after the related table like this\r\n    */\t\t\t   \r\n    \r\n    $user = $result[0]->user(); \r\n    \r\n    \r\n    \r\n    /*\r\n    *\tThe good thing about this is that data from \"user\" table is not loaded yet\r\n    *\tbut you can rather update the related record without fetching it (neat)\t \r\n    *\tsomething like this:\r\n    */\r\n    \r\n    $user->banned = \"1\";\r\n    $user->active = 0;\r\n    $user->save();\r\n    \r\n    /*\r\n    * This will generate an update query to the user where the user_id from the\r\n    * previous query matches\r\n    * No EXTRA selects\r\n    * but when needed just call the load() method\r\n    */\r\n\r\n\t$user = $user->load(); \r\n    \r\n\t// user data is loaded now and can be displayed or manipulated then saved\r\n    \r\n\t echo $user->alias;\r\n     \r\n     /**\r\n     *   Joins\r\n     */\r\n      /*\r\n          * Tables have defined relations (innodb)\r\n          *\r\n          * SELECT     dept_manager.dept_no,\r\n          * \t\tdept_manager.emp_no,\r\n          * \t\tdept_manager.from_date,\r\n          * \t\tdept_manager.to_date ,\r\n          * \t\tdepartments.dept_name ,\r\n          * \t\temployees.last_name\r\n          * FROM \tdept_manager\r\n          *     JOIN \tdepartments\r\n          *       ON \t\tdept_manager.dept_no = departments.dept_no\r\n          *     JOIN \temployees\r\n          *       ON \t\tdept_manager.emp_no = employees.emp_no\r\n          * WHERE dept_manager.emp_no = 110039\r\n          */\r\n          \r\n            \r\n        $res = $dept_manager->find(110039)\r\n\t\t\t\t\t\t\t->with(array('departments' => array(\"dept_name\")))\r\n\t\t\t\t\t\t\t->with(array('employees' => array(\"last_name\")))\r\n\t\t\t\t\t\t\t->fetch();\r\n\t \r\n     /**\r\n     * From your controllers you can either use your models\r\n     */\r\n     $post = models\\blog_post::getInstance()->getPost($id);\r\n     \r\n     /**\r\n     * Or use the entities directly\r\n     */\r\n     $post = entity\\blog_post::getInstance()->find($id)->fetch();\r\n```\r\n\r\n- Log Errors, debug messages and display them however you want \r\n\r\n```php\r\n   class index extends Phiber\\controller\r\n{\r\n\r\n  public function main()\r\n  {\r\n    $variableOne = 'test';\r\n\r\n    $variableTwo = 'var';\r\n\r\n    $variableThree = 32156;\r\n\r\n    echo $undefined;\r\n\r\n    $this->view->message = \"This is dev module controller - welcome to Phiber\";\r\n\r\n    $this->get('log')->notice('hello from index!:' . __line__);\r\n\r\n    $vars = 'scope test';\r\n\r\n    $log2 = $this->setLog('file', 'second', 'secondlog');\r\n\r\n    $this->get('log')->notice('hello from index!:' . __line__, array('message' => $this->view->message));\r\n\r\n    $log2->info('hello from index!:' . __line__);\r\n\r\n    $this->logger()->debug('second hello from index!:' . __line__);\r\n\r\n    $this->get('secondlog')->debug('second hello from index!:' . __line__);\r\n\r\n    trigger_error(' A triggered E_USER_WARNING', E_USER_WARNING);\r\n  }\r\n}\r\n\r\n// In debug mode (set globally in config.php or dynamically in runtime)\r\n// The above code will output this to your browser\r\n\r\nNotice:Undefined variable: undefined\r\n\r\nCode:8 File:{PATH}/library/modules/dev/index.php:14\r\n\r\nVars:\r\n\r\n $variableOne = test\r\n $variableTwo = var\r\n $variableThree = 32156\r\n\r\nTrace:\r\n\r\n0. index->main() {PATH}/library/main.php:235\r\n\r\n1. Phiber\\main->dispatch() {PATH}/library/main.php:82\r\n\r\n2. Phiber\\main->run() {PATH}/site/index.php:6\r\n\r\n[notice] hello from index!:18\r\n\r\nArray\r\n(\r\n    [message] => This is dev module controller - welcome to Phiber\r\n)\r\n\r\n[info] hello from index!:26\r\n\r\n[debug] second hello from index!:28\r\n\r\n[debug] second hello from index!:30\r\n\r\nWarning: A triggered E_USER_WARNING\r\n\r\nCode:512 File:{PATH}library/modules/dev/index.php:32\r\n\r\nVars:\r\n\r\n $variableOne = test\r\n $variableTwo = var\r\n $variableThree = 32156\r\n $vars = scope test\r\n $log2 = Instance of logger\\file\r\n\r\nTrace:\r\n\r\n0. trigger_error() {PATH}/library/modules/dev/index.php:32\r\n\r\n  Vars:\r\n  A triggered E_USER_WARNING\r\n  512\r\n\r\n1. index->main() {PATH}/library/main.php:235\r\n\r\n2. Phiber\\main->dispatch() {PATH}/library/main.php:82\r\n\r\n3. Phiber\\main->run() {PATH}/site/index.php:6\r\n\r\n```\r\n\r\n- and more other cool features to come.\r\n\r\nThis project is under heavy developement and still in alpha stage. Please come back soon.\r\n\r\nNeedless to say, any help is much appreciated.\r\n\r\nWe try to keep up with [Semantic Versioning](http://semver.org/)\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}